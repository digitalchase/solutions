"use strict";function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}!function(v){var n=function(){function n(t,e){_classCallCheck(this,n),this.el=this.is("String",t)?v(t):t,this.uniqId="dc"+Date.parse(new Date),this.select=v('[data-uniqId="'.concat(this.uniqId,'"]')),this.defaultOpitons={placeholder:null!=this.el.data("placeholder")?this.el.data("placeholder"):"Выберите",search:null!=this.el.data("search"),searchPlaceholder:null!=this.el.data("search-placeholder")?this.el.data("search-placeholder"):"Поиск",notFoundContent:null!=this.el.data("not-found-content")?this.el.data("not-found-content"):"Совпадений не найдено",baronScrollInit:null!=this.el.data("baron-scroll-init"),btnReset:null!=this.el.data("btn-reset"),multiple:null!=this.el.data("multiple"),multiplePlaceholder:null!=this.el.data("multiple-placeholder")?this.el.data("multiple-placeholder"):void 0,on:{dropdownOpen:null,dropdownClose:null}},this.state={init:!1,dropdownIsOpen:!1},this.uiComponent={},this.options=this.is("Object",e)?Object.assign(this.defaultOpitons,e):this.defaultOpitons,console.log(e),0==this.state.init&&this.init()}return _createClass(n,[{key:"is",value:function(t,e){var n=Object.prototype.toString.call(e).slice(8,-1);return null!=e&&n===t}},{key:"init",value:function(){var t=this.options.search;this.el.wrap('<div class="_dc_customSelect-wrapper" id="'.concat(this.uniqId,'"/>')),this.el.hide(),this.createSelectUi(v("#".concat(this.uniqId))),this.bindFunctionOnUi(),this.outerClick(),!0===t&&this.searchInit(),this.state.init=!0}},{key:"createSelectUi",value:function(t){var e=this,n=this.options,o=n.placeholder,c=n.search,l=n.searchPlaceholder,i=n.notFoundContent,s=n.baronScrollInit,a=n.btnReset,d=n.multiple,r="",u="",_="",h=[];d?(t.find("select").attr("multiple",""),Array.from(t.find("select option").each(function(t,e){null!=v(e).attr("value")&&h.push('\n                                        <label class="_dc_customSelect__list_item">\n                                            <input type="checkbox" value="'.concat(v(e).attr("value"),'">\n                                            <div class="_dc_customSelect__list_customCheckbox">\n                                                <div class="_dc_customSelect__list_customCheckbox_box"></div>\n                                                <div class="_dc_customSelect__list_customCheckbox_text">').concat(v(e).text(),"</div> \n                                            </div>\n                                        </label>\n                                    "))}))):Array.from(t.find("select option").each(function(t,e){null!=v(e).attr("value")&&h.push('\n                                        <div class="_dc_customSelect__list_item" data-value="'.concat(v(e).attr("value"),'">').concat(v(e).text(),"</div>\n                                    "))})),r=e.is("Function",window.baron)&&!0===s?'\n                                    <div class="_dc_customSelect__customScroll-wrapper">\n                                        <div class="_dc_customSelect__customScroll_scroller">\n                                            <div class="_dc_customSelect__list '.concat(a?" _dc_customSelect__list-offsetBottom":"",'">\n                                                ').concat(h.join(""),'\n                                            </div>\n                                        </div>\n                                        <div class="_dc_customSelect__customScroll_track ').concat(a?" _dc_customSelect__customScroll_track-btnReset":"",'">\n                                            <div class="_dc_customSelect__customScroll_bar"></div>\n                                        </div>\n                                    </div>\n                                '):'\n                                    <div class="_dc_customSelect__list '.concat(a?" _dc_customSelect__list-offsetBottom":"",'">\n                                        ').concat(h.join(""),"\n                                    </div>\n                                "),!0===a&&(u='\n                                <div class="_dc_customSelect__btnReset">\n                                    <div class="_dc_customSelect__btnReset_icon"></div>\n                                    <div class="_dc_customSelect__btnReset_text">Сброс</div>\n                                    <div class="_dc_customSelect__btnReset_trigger"></div>\n                                </div>\n                            '),c&&(_='\n                                <div class="_dc_customSelect__search">\n                                    <div class="_dc_customSelect__search_input">\n                                        <input type="search" autocomplete="off" placeholder="'.concat(l,'" />\n                                        <div class="_dc_customSelect__search_icon">\n                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                                <path d="M12.5 11H11.71L11.43 10.73C12.41 9.59 13 8.11 13 6.5C13 2.91 10.09 0 6.5 0C2.91 0 0 2.91 0 6.5C0 10.09 2.91 13 6.5 13C8.11 13 9.59 12.41 10.73 11.43L11 11.71V12.5L16 17.49L17.49 16L12.5 11ZM6.5 11C4.01 11 2 8.99 2 6.5C2 4.01 4.01 2 6.5 2C8.99 2 11 4.01 11 6.5C11 8.99 8.99 11 6.5 11Z" fill="#999999"/>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="_dc_customSelect__not-found" style="display: none">\n                                    ').concat(i,"\n                                </div>\n                            ")),t.append('\n                                <div class="_dc_customSelect__select">\n                                    <div class="_dc_customSelect__select_text"></div>\n                                    <div class="_dc_customSelect__trigger">\n                                        <div class="_dc_customSelect__trigger_arrow">\n                                            <svg width="9" height="5" viewBox="0 0 9 5" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                                <path d="M8.354 4.30459C8.354 4.36492 8.32052 4.43279 8.2703 4.47804L7.85177 4.8551C7.80155 4.90035 7.72621 4.93051 7.65925 4.93051C7.59229 4.93051 7.51695 4.90035 7.46673 4.8551L4.17711 1.89141L0.887486 4.8551C0.837262 4.90035 0.761927 4.93051 0.694963 4.93051C0.619628 4.93051 0.552664 4.90035 0.502441 4.8551L0.0839138 4.47804C0.0336905 4.43279 0.000208855 4.36492 0.000208855 4.30459C0.000208855 4.24426 0.0336905 4.17639 0.0839138 4.13114L3.98458 0.616946C4.03481 0.571699 4.11014 0.541535 4.17711 0.541535C4.24407 0.541535 4.31941 0.571699 4.36963 0.616946L8.2703 4.13114C8.32052 4.17639 8.354 4.24426 8.354 4.30459Z" fill="#333333"/>\n                                            </svg>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="_dc_customSelect__dropdown">\n                                    '.concat(_,"\n                                    ").concat(r,"\n                                    ").concat(u,"\n                                </div>\n                            ")),e.is("Function",window.baron)&&s&&(window.baronInit=[],window.baronInit[e.uniqId]=baron({root:v("#".concat(e.uniqId," ._dc_customSelect__customScroll-wrapper")).selector,scroller:"._dc_customSelect__customScroll_scroller",bar:"._dc_customSelect__customScroll_bar",scrollingCls:"_scrolling",draggingCls:"_dragging"}));var p=v("#".concat(this.uniqId));this.uiComponent={globalWrapper:p,selectBox:p.find("._dc_customSelect__select"),selectEl:p.find("select"),selectPlaceholder:p.find("._dc_customSelect__select_text"),dropdown:p.find("._dc_customSelect__dropdown"),searchInput:p.find('[type="search"]'),notFoundBlockMessage:p.find("._dc_customSelect__not-found"),list:p.find("._dc_customSelect__list"),listItems:p.find("._dc_customSelect__list_item"),btnResetElement:p.find("._dc_customSelect__btnReset_trigger")};var m=this.uiComponent.selectEl;""===m.find("option").eq(0).val().trim()?(e.setVal(""),e.updatePlaceholder(o)):(e.setVal(m.find("option").eq(0).val().trim()),e.updatePlaceholder(m.find("option").eq(0).text().trim()))}},{key:"searchInit",value:function(){var t=this.uiComponent,e=t.globalWrapper,n=t.searchInput,c=t.listItems,l=t.notFoundBlockMessage;n.on("input",function(){var o=v(this);e.is(".notFound")&&e.removeClass("notFound"),c.each(function(t,e){var n=o.val().toLowerCase();new RegExp(n,"i").test(v(e).text().toLowerCase())?v(e).show():v(e).hide()}),0===Array.from(c).filter(function(t){return v(t).is(":visible")}).length?(l.show(),e.addClass("notFound")):l.is(":visible")&&l.hide()})}},{key:"bindFunctionOnUi",value:function(){var n,t=this.options,e=t.on,o=t.btnReset,c=t.multiple,l=t.placeholder,i=t.multiplePlaceholder,s=this.state,a=s.dropdownIsOpen,d=s.globalWrapper,r=this.uiComponent,u=r.selectBox,_=r.listItems,h=r.btnResetElement,p=r.selectEl,m=(v("#".concat(this.uniqId)),this);(u.on("click",function(){console.log(a),a?m.closeDropdown():m.openDropdown(),console.log(e),void 0!==e&&m.is("Object",e)&&(m.is("Function",e.dropdownOpen)&&a?e.dropdownOpen(d):m.is("Function",e.dropdownClose)&&!a&&e.dropdownClose(d))}),c)?_.on("click",function(){var t;v(this).toggleClass("active"),_.find("input:checked").each(function(t,e){v(e).parent("._dc_customSelect__list_item").addClass("active")}),m.setVal(v(this).attr("data-value")),n=[],_.find("input:checked").each(function(t,e){n.push(v(e).val())}),p.val(n),t=""===n.join(", ").trim()?l:null!=i?i:n.join(", ").trim(),m.updatePlaceholder(t)}):_.on("click",function(){m.setVal(v(this).attr("data-value")),_.removeClass("active"),v(this).addClass("active"),m.updatePlaceholder(v(this).text()),m.closeDropdown()});h.length&&o&&h.on("click",function(){m.resetValue()})}},{key:"outerClick",value:function(){this.options.on;var n=this.uiComponent.globalWrapper,o=this;v(document).click(function(t){var e=n;e.is(t.target)||0!==e.has(t.target).length||o.closeDropdown()})}},{key:"resetValue",value:function(t){var e=this,n=this.uiComponent,o=n.btnResetElement,c=n.listItems,l=this.options,i=l.placeholder,s=l.multiple;o.on("click",function(){e.setVal(""),e.closeDropdown(),e.updatePlaceholder(null!=t?t:i),c.removeClass("active"),s&&c.find("input:checked").prop("checked",!1)})}},{key:"openDropdown",value:function(){var t=this.options,e=t.on,n=t.baronScrollInit,o=(this.state.dropdownIsOpen,this),c=v("#".concat(this.uniqId));c.find("._dc_customSelect__dropdown").css({position:"absolute",top:c.innerHeight(),left:0,width:"100%"}),c.addClass("dropped"),o.is("Function",window.baron)&&n&&(c.find("._dc_customSelect__customScroll_scroller").height()>c.find("._dc_customSelect__list").innerHeight()?c.find("._dc_customSelect__customScroll_track").hide():(c.find("._dc_customSelect__customScroll_track").show(),window.baronInit[o.uniqId].update())),void 0!==e&&o.is("Object",e)&&o.is("Function",e.dropdownOpen)&&c.is(".dropped")&&e.dropdownOpen(o.el.parent())}},{key:"closeDropdown",value:function(){var t=this.options,e=t.on,n=(t.multiple,this.state.dropdownIsOpen,this.uiComponent),o=n.globalWrapper;n.listItems,n.selectEl;o.removeClass("dropped"),o.find('[type="search"]').val(""),o.find("._dc_customSelect__not-found").hide(),o.removeClass("notFound"),o.find("._dc_customSelect__list_item").show(),void 0!==e&&this.is("Object",e)&&this.is("Function",e.dropdownClose)&&!o.is(".dropped")&&e.dropdownClose(this.el.parent())}},{key:"setVal",value:function(t){var e=this.uiComponent.selectEl;e.val(t),e.trigger("change")}},{key:"updatePlaceholder",value:function(t){this.uiComponent.selectPlaceholder.html(t)}},{key:"getVal",value:function(){return this.uiComponent.selectEl.val()}}]),n}();v.fn.dcInitCustomSelect=function(t){var e=t;return this.each(function(t){v(this).attr("data-uniqId","dc"+Date.parse(new Date)+t),new n(v(this),e?e[t]:"")})}}(jQuery);
